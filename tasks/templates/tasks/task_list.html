    <!DOCTYPE html>
    <html>
    <head>
        <title>Tasks</title>
            <style>
            body {
                margin: 0;
                font-family: 'Segoe UI', Tahoma, sans-serif;
                min-height: 100vh;
                background: linear-gradient(135deg, #667eea, #764ba2);
                padding: 40px;
                box-sizing: border-box;
            }

           .container {
                background: #ffffff;
                border-radius: 14px;
                padding: 25px 30px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.15);
                max-width: 1100px;
                height: 630px;
                margin: auto;

                display: flex;
                flex-direction: column;
            }

            header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
            }

            header h2 {
                margin: 0;
                color: #333;
                font-weight: 600;
            }

            .subtitle {
                font-size: 14px;
                color: #666;
                margin-top: 4px;
            }

            .add-btn {
                padding: 10px 18px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                transition: transform 0.2s, box-shadow 0.2s;
            }

            .add-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
                font-size: 14px;
            }

            th {
                background: #f5f6fa;
                color: #333;
                text-align: left;
                padding: 12px;
                font-weight: 600;
            }

            td {
                padding: 12px;
                border-bottom: 1px solid #eee;
                color: #444;
            }

            tr:hover {
                background: #f9f9ff;
            }

            .edit {
                cursor: pointer;
                font-size: 16px;
                transition: transform 0.2s;
            }

            .edit:hover {
                transform: scale(1.1);
            }

            /* Modal */
            .modal {
                display: none;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.6);
                z-index: 999;
            }

            .modal-content {
                background: #fff;
                width: 420px;
                margin: 8% auto;
                padding: 25px;
                border-radius: 10px;
                position: relative;
                box-shadow: 0 15px 35px rgba(0,0,0,0.25);
                animation: slideUp 0.3s ease;
            }

            @keyframes slideUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }

            .modal-content h3 {
                margin-top: 0;
                color: #333;
            }

            label {
                font-size: 13px;
                font-weight: 600;
                color: #444;
            }

            input, textarea, select {
                width: 100%;
                padding: 8px;
                margin-top: 5px;
                border-radius: 5px;
                border: 1px solid #ccc;
                font-size: 13px;
            }

            textarea {
                resize: vertical;
            }

            button {
                padding: 8px 14px;
                border-radius: 5px;
                border: none;
                cursor: pointer;
                font-size: 13px;
            }

            .close-btn {
                position: absolute;
                top: 12px;
                right: 14px;
                font-size: 18px;
                cursor: pointer;
                color: #777;
            }

            .close-btn:hover {
                color: red;
            }

            .required-star {
                color: red;
            }

            .error {
                color: red;
                font-size: 12px;
                display: none;
            }

            .footer {
                text-align: center;
                margin-top: 25px;
                font-size: 13px;
                color: #555;
                font-style: italic;
            }

            .footer span {
                color: #667eea;
                font-weight: 600;
            }
            .table-wrapper {
                flex: 1;                 
                overflow-y: auto;
                margin-top: 10px;
                border-radius: 8px;
            }
            th {
            position: sticky;
            top: 0;
            background: #f5f6fa;
            z-index: 1;
        }
        .pagination {
                display: flex;
                justify-content: center;
                gap: 8px;
                margin-top: 15px;
            }

            .pagination a,
            .pagination span {
                padding: 6px 12px;
                border-radius: 5px;
                font-size: 13px;
                text-decoration: none;
                color: #667eea;
                border: 1px solid #ddd;
                transition: all 0.2s ease;
            }

            .pagination a:hover {
                background: #667eea;
                color: white;
            }

            .pagination .active {
                background: #667eea;
                color: white;
                border-color: #667eea;
                font-weight: 600;
            }

            .pagination .disabled {
                color: #aaa;
                cursor: not-allowed;
                background: #f5f5f5;
            }
        </style>

    </head>
   <body>
    <div class="container">

        <header>
            <div>
                <h2>Your Tasks </h2>
            </div>
            <button class="add-btn" onclick="openCreateModal()">+ Add Task</button>
        </header>
    <div class="table-info">
        Total Tasks: <span>{{ total_tasks }}</span>
    </div>

    <div class="table-wrapper">
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Due Date</th>
                <th>Status</th>
                <th>Update</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ task.title }}</td>
                <td>{{ task.description }}</td>
                <td>{{ task.due_date|default:"-" }}</td>
                <td>{{ task.status }}</td>
                <td>
                    <span class="edit"
                        data-id="{{ task.id }}"
                        data-title="{{ task.title }}"
                        data-description="{{ task.description }}"
                        data-status="{{ task.status }}"
                        data-due="{{ task.due_date|date:'Y-m-d' }}"
                        onclick="openModal(this)">
                        ‚úèÔ∏è
                    </span>
                </td>
                <td>
                    <span class="edit"
                        style="color:red;"
                        onclick="openDeleteModal({{ task.id }})">
                        üóëÔ∏è
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
    <div class="pagination">
    {% if tasks.has_previous %}
        <a href="?page={{ tasks.previous_page_number }}">&laquo; Prev</a>
    {% else %}
        <span class="disabled">&laquo; Prev</span>
    {% endif %}

    {% for num in tasks.paginator.page_range %}
        {% if tasks.number == num %}
            <span class="active">{{ num }}</span>
        {% else %}
            <a href="?page={{ num }}">{{ num }}</a>
        {% endif %}
    {% endfor %}

    {% if tasks.has_next %}
        <a href="?page={{ tasks.next_page_number }}">Next &raquo;</a>
    {% else %}
        <span class="disabled">Next &raquo;</span>
    {% endif %}
</div>

    <!--Edit  MODAL -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">√ó</span> 
            <h3>Edit Task</h3>

            <input type="hidden" id="taskId">

            <label>
                Title <span class="required-star">*</span>
            </label><br>
            <input type="text" id="title">
            <span class="error" id="editTitleError">Title is required</span>
            <br><br>


            <label>Description</label><br>
            <textarea id="description"></textarea><br><br>

            <label>Due Date</label><br> 
            <input type="date" id="dueDate"><br><br>

            <label>Status</label><br>
            <select id="status">
                <option value="pending">Pending</option>
                <option value="completed">Completed</option>
            </select><br><br>

            <button onclick="updateTask()">Update</button>
            <button onclick="closeModal()">Cancel</button>
        </div>
    </div>

    <!-- CREATE MODAL -->
    <div class="modal" id="createModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCreateModal()">√ó</span>
            <h3>Create Task</h3>

            <label>
                Title <span class="required-star">*</span>
            </label><br>
            <input type="text" id="createTitle">
            <span class="error" id="createTitleError">Title is required</span>
            <br><br>


            <label>Description</label><br>
            <textarea id="createDescription"></textarea><br><br>

            <label>Due Date</label><br>
            <input type="date" id="createDueDate"><br><br>


            <label>Status</label><br>
            <select id="createStatus">
                <option value="pending">Pending</option>
                <option value="completed">Completed</option>
            </select><br><br>

            <button onclick="createTask()">Create</button>
            <button onclick="closeCreateModal()">Cancel</button>
        </div>
    </div>
    <!-- DELETE MODAL -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeDeleteModal()">√ó</span>
            <h3>Confirm Delete</h3>

            <p>Are you sure you want to delete this task?</p>

            <input type="hidden" id="deleteTaskId">

            <button onclick="confirmDelete()" style="background:red;color:white;">
                Yes, Delete
            </button>

            <button onclick="closeDeleteModal()">No</button>
        </div>
    </div>


    <script>
    function openModal(el) {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('taskId').value = el.dataset.id;
        document.getElementById('title').value = el.dataset.title;
        document.getElementById('description').value = el.dataset.description;
        document.getElementById('status').value = el.dataset.status;
        const dueDateInput = document.getElementById('dueDate');
    dueDateInput.min = today;                 // ‚úÖ important
    dueDateInput.value = el.dataset.due || ''; 
        document.getElementById('editModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('editModal').style.display = 'none';
    }

    function updateTask() {
        const id = document.getElementById('taskId').value;

        fetch(`/api/tasks/${id}/`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                title: document.getElementById('title').value,
                description: document.getElementById('description').value,
                status: document.getElementById('status').value,
                due_date: document.getElementById('dueDate').value || null
            })
        })
        .then(response => response.json())
        .then(data => {
            alert('Task updated');
            closeModal();
        });
    }
    </script>

    <script>
    function openCreateModal() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('createTitle').value = '';
        document.getElementById('createDescription').value = '';
        document.getElementById('createStatus').value = 'pending';
        const createDueDateInput = document.getElementById('createDueDate');
        createDueDateInput.min = today;    // ‚úÖ important
        createDueDateInput.value = '';
        document.getElementById('createModal').style.display = 'block';
    }

    function closeCreateModal() {
        document.getElementById('createModal').style.display = 'none';
    }

    function createTask() {
        fetch('/api/tasks/create/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                title: document.getElementById('createTitle').value,
                description: document.getElementById('createDescription').value,
                status: document.getElementById('createStatus').value,
                due_date: document.getElementById('createDueDate').value || null
            })
        })
        .then(response => response.json())
        .then(data => {
            alert('Task created successfully');
            location.reload();   // simplest & reliable
        })
        .catch(error => {
            alert('Error creating task');
        });
    }
    </script>

    <script>
    function openDeleteModal(taskId) {
        document.getElementById('deleteTaskId').value = taskId;
        document.getElementById('deleteModal').style.display = 'block';
    }

    function closeDeleteModal() {
        document.getElementById('deleteModal').style.display = 'none';
    }

    function confirmDelete() {
        const taskId = document.getElementById('deleteTaskId').value;

        fetch(`/api/tasks/${taskId}/delete/`, {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(data => {
            alert('Task deleted successfully');
            location.reload();
        })
        .catch(error => {
            alert('Error deleting task');
        });
    }
    </script>
<script>
function updateTask() {
    const titleInput = document.getElementById('title');
    const error = document.getElementById('editTitleError');

    if (!titleInput.value.trim()) {
        error.style.display = 'block';
        titleInput.focus();
        return;
    } else {
        error.style.display = 'none';
    }

    const id = document.getElementById('taskId').value;

    fetch(`/api/tasks/${id}/`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            title: titleInput.value,
            description: document.getElementById('description').value,
            status: document.getElementById('status').value,
            due_date: document.getElementById('dueDate').value || null
        })
    })
    .then(response => response.json())
    .then(data => {
        alert('Task updated');
        closeModal();
    });
}
</script>
<script>
function createTask() {
    const titleInput = document.getElementById('createTitle');
    const error = document.getElementById('createTitleError');

    if (!titleInput.value.trim()) {
        error.style.display = 'block';
        titleInput.focus();
        return;
    } else {
        error.style.display = 'none';
    }

    fetch('/api/tasks/create/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            title: titleInput.value,
            description: document.getElementById('createDescription').value,
            status: document.getElementById('createStatus').value,
            due_date: document.getElementById('createDueDate').value || null
        })
    })
    .then(response => response.json())
    .then(data => {
        alert('Task created successfully');
        location.reload();
    })
    .catch(error => {
        alert('Error creating task');
    });
}
</script>
    <div class="footer">
            Designed & Developed by <span>Shruti Singh</span>
        </div>


    </body>
    </html>
